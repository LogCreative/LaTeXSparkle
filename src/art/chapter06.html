<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../../css/normalize.min.css">
        <link rel="stylesheet" type="text/css" href="../../css/master.css"/>
        <link media="(max-width: 1000px)" rel="stylesheet" type="text/css" href="../../css/mobile.css"/>
        <link rel="stylesheet" type="text/css" href="../../css/tab.css"/>
        <link rel="stylesheet" type="text/css" href="../../css/badge.css"/>
        <script src="../../js/jquery-3.5.1.min.js"></script>
        <script src="../../js/jquery.ba-resize.min.js"></script>
    </head>
    <title>
        像模像样 LaTeX
    </title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../js/ReadProgressBar.js"></script>
    <body>
        <div class="rightcol">
            <div id="loadbar">
                <strong id="bar"></strong>
            </div>
            <div id="side-menu"></div>
        </div>
        <div class="side-bar">
            <label id="menu-toggle" for="menu-checkbox">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="30" height="30">
                    <g fill="none">
                      <path stroke="whitesmoke" stroke-linecap="round" stroke-width="3" d="M5 10 l20 0" />
                      <path stroke="whitesmoke" stroke-linecap="round" stroke-width="3" d="M5 18 l20 0" />
                      <path stroke="whitesmoke" stroke-linecap="round" stroke-width="3" d="M5 26 l20 0" />
                    </g>
                  </svg>
            </label>
            <input id="menu-checkbox" type="checkbox"/>
            <div class="header">
                <a href="../../index.html" class="logo"><svg style="fill: white; font-family: Times,'宋体'" width="144" height="35">
                    <text x="0" y="28" style="font-size: x-large">像</text>
                    <text x="21" y="23" style="font-size:large">模</text>
                    <text x="36" y="33" style="font-size: x-large">像</text>
                    <text x="56" y="28" style="font-size:x-large">样</text>
                    <text x="85" y="28" style="font-size:x-large">L</text>
                    <text x="92" y="23" style="font-size:large">A</text>
                    <text x="102" y="28" style="font-size:x-large">T</text>
                    <text x="114" y="33" style="font-size:x-large">E</text>
                    <text x="126" y="28" style="font-size:x-large">X</text>
                    </svg></a>
            </div>
            <div class="nav">
                <a href="../../index.html" class="item">首页</a>
                <a href="../roadmap.html" class="item">路线图</a>
                <a href="../article-list.html" class="item">讲稿</a>
                <a href="../about.html" class="item">关于</a>
            </div>
            <div class="footer">
                <div class="item_s">\(\rm \LaTeX\) <b>Sparkle Project</b></div>
            <div class="item_s">LogCreative 2020-2021 0201-0210</div>
            <a href="https://github.com/LogCreative/LaTeXSparkle" class="item" target="_blank">
                <svg class="octicon octicon-mark-github v-align-middle" height="16" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
                GitHub</a>
            <a href="https://space.bilibili.com/31271993" class="item" target="_blank"> <img src="../../img/bilibili.ico" height="16px"> Bilibili</a>
            <br>
            <a href="https://www.mathjax.org/#gettingstarted" class="item" style="font-size: smaller;" target="_blank">POWERED BY MathJax</a>
            <a href="https://github.com/aslushnikov/latex-online" target="_blank" class="item" style="font-size: smaller;">POWERED BY LatexOnline</a>
            <embed src="../../by-sa.svg" style="padding:5px 0px;" type="image/svg+xml"/>
            </div>
        </div>
        <progress value="0"></progress>
        <div id="bottom-link"></div>
        <div class="main">
            <div class="article" id="content" style="color: black;">
                <h1 class="title">第六节 简约统计图</h1>
                <div class="status" id="CH06">状态：文稿准备中</div>
                <div class="content">
                    

                    <!-- PGFPlots 代码生成器 -->
                    <div class="deskOnly">
                        <iframe src="https://logcreative.github.io/PGFPlotsEdt/index.html?lang=cn" frameborder="0" width="100%" scrolling="Yes" height="650" leftmargin="0" topmargin="0"> 
                        </iframe>
                    </div>
                    <div class="tipframe">
                        <div class="tipbox">
                            <a href="chapter04.html">
                                <div class="toutu">
                                    <embed src="https://cdn.jsdelivr.net/gh/LogCreative/LaTeXSparkle/doc/CH06/pic/svg/NN.svg" type="text/svg+xml" width="100%"/>
                                    <embed class="tipcode" src="../../doc/CH06/pic/txt/NN.txt" type="text/plain" width="100%" height="300px"/>
                                    节点箭头示意图适合使用 Ti<i>k</i>Z 绘制，推荐使用第四节提到的 TikZEdt 网格式实时编辑矢量图形，并且可以尝试使用循环语句或宏包指令简化手动绘制量。
                                </div>
                            </a>
                        </div>
                        <div class="tipbox">
                            <a href="https://logcreative.github.io/PGFPlotsEdt/index.html?lang=cn" target="_blank">
                                <div class="toutu" id="pgfCorrect">
                                    <embed src="https://cdn.jsdelivr.net/gh/LogCreative/LaTeXSparkle/doc/CH06/pic/svg/flower.svg" type="text/svg+xml" width="100%"/>
                                    <embed class="tipcode" src="../../doc/CH06/pic/txt/flower.txt" type="text/plain" width="100%" height="300px"/>
                                    PGFPlots 适合简明的统计图绘制，清晰的矢量图像与精简美观的样式库会让统计图与文章浑然一体，高度定制化的参数设定可以通过图像巧妙地示意弦外之音。
                                </div>
                            </a>
                        </div>
                        <div class="tipbox" id="tipimg">
                            <a href="https://github.com/LogCreative/GraphGenDecomp" target="_blank">
                                <div class="toutu">
                                    <img src="https://cdn.jsdelivr.net/gh/LogCreative/LaTeXSparkle/doc/CH06/pic/svg/GDD.gif" width="100%">
                                    <img id="bigImg" src="https://cdn.jsdelivr.net/gh/LogCreative/LaTeXSparkle/doc/CH06/pic/svg/gdd.png" width="100%">
                                    大型数据点的统计图不适合使用 PGFPlots 绘制，这种图形使用位图的存储效率更高，并且过多矢量点会导致更长的编译时间和 PDF 文档的加载时间。
                                </div>
                            </a>
                            
                        </div>
                    </div>

                    <h3>6.1 PGFPlots 统计图框架</h3>
                    老样子，需要在导言区引入宏包，并且指定使用的宏包版本。
                    <pre>\usepackage{pgfplots}
\pgfplotsset{compat=1.17}</pre>
                    <p>该宏包是基于 Ti<i>k</i>Z 的，所以最外部需要添加<span>tikzpicture</span>环境，而构成一个 PGFPlots 统计图环境的最基本单位就是一个<span>axis</span>环境；后面紧跟该统计图的整体参数；坐标系内添加数据序列。</p>
                    
                    <ol>
                        <li><span>\addplot</span>添加二维点集；</li>
                        <li><span>\addplot3</span>添加三维点集。</li>
                    </ol>
                    
                    <p>每个数据后面可以使用<span>[参数]</span>接上该数据系列的参数，再接
                        
                        <ul>
                            <li><span>table {数据文件}</span>引入数据，数据文件的每一行为一个坐标，多维度的坐标之间需要使用空格分隔。如果需要封装数据源，需要使用 <span>\pgfplotstableread</span> 命令赋予数据一个变量，注意变量名不能含有数字；</li>
                            <li><span>coordinates {(\(x_1\),\(y_1\),\(z_1\)) (\(x_2\),\(y_2\),\(z_2\))}</span>直接标明坐标点；</li>
                            <li><span>{函数表达式}</span>直接绘制二维函数图像。如果是三维函数，需要写出三个维度上的参数化方程，用<span>({\(x(t)\)},{\(y(t)\)},{\(z(t)\)})</span>表示。如果是直接的 \(z\)轴 表达式，可以直接写出关于 \(x\) 和 \(y\) 的函数表达式 <span>{\(z(x,y)\)}</span>。</li>
                        </ul>
                    </p>
                    <p>最后，可以使用<span>\legend</span>添加图例系列名称。</p>

                    <pre>\begin{tikzpicture}
    \begin{axis}[]
        \addplot[] table {data.dat};
        \legend{data};
    \end{axis}
\end{tikzpicture}</pre>

                    <p>编译时，可以单独编译出一个 PDF 文件，使用<span>\includegraphics{graph.pdf}</span>引入静态文件。使用 \(\rm Lua\LaTeX\) 可以加速编译进度，并使用动态内存以免除内存上限问题。</p>

                    <h3>6.2 不同类型的统计图</h3>

                    <details>
                        <summary>
                          <a href="https://github.com/LogCreative/LaTeXSparkle/blob/master/doc/CH06/graphExamples.pdf" target="_blank">graphExamples.pdf</a> <a href="https://github.com/LogCreative/LaTeXSparkle/blob/master/doc/CH06/graphExamples.tex" target="_blank">[源代码]</a>
                        </summary>
                        <embed id="ExpPdf" src="../../doc/CH06/graphExamples.pdf" type="application/pdf" width="100%" height="1000px">
                    </details>
                    <p>在<span>axis</span>后面添加的参数为坐标系全局参数；在每个数据系列上添加的参数为局部参数。推荐全局使用的参数用🌐标记。更多类型的统计图绘制方法可以参看 <a href="https://mirrors.rit.edu/CTAN/graphics/pgf/contrib/pgfplots/doc/pgfplots.pdf" target="_blank">PGFPlots 宏包手册</a>。</p>
                <div class="graphTab">
                    <!-- 导航条 -->
                    <ul class="tab_nav">
                        <li class="tabNav_active">折线图</li>
                        <li>折点图</li>
                        <li>散点图</li>
                        <li>柱形图</li>
                        <li>面积图</li>
                        <li>曲面图</li>
                        <li>等高图</li>
                        <li>直方图</li>
                        <li>箱式图</li>
                    </ul>
                    <!-- 导航栏 -->
                    <ul class="tab_box">
                        <li class="tabBox_active"><b>折线图</b> 在不加任何参数的情况下，图形呈现的就是单纯的折线图。</li>
                        <li><b>折点图</b> 添加参数<span>mark=*</span>可以添加散点标记，当然可以更换为其他的标记，比如<span>x</span><span>+</span>等（启用<span>plotmarks</span>标记库以使用更多类型的标记）。</li>
                        <li><b>散点图</b> 添加参数<span>only marks</span>可以只显示散点标记，不显示折线。添加<span>scatter</span>参数可以让散点跟随其因变量取值(\(y\) 或 \(z\))变为七彩的。</li>
                        <li><b>柱形图</b> 添加参数<span>ybar</span>（或者是<span>xbar</span>横向柱形图）。如果需要产生堆积柱形图，请使用<span>ybar stacked</span>（或<span>xbar stacked</span>）参数🌐。</li>
                        <li><b>面积图</b> 在系列的分号前添加<span>\closedcycle</span>就可以闭合路径以产生面积图。如果需要产生堆积面积图，请使用<span>stack plots=y</span>参数🌐。</li>
                        <li><b>曲面图</b> 三维坐标使用<span>mesh</span>参数产生曲面线框，使用<span>surf</span>参数产生曲面填充层。</li>
                        <li><b>等高图</b> 三维坐标使用<span>contour filled</span>参数产生等高填充图，使用<span>contour gnuplot</span>产生等高线图。
                        <div class="toutu">
                            等高填充图在某些 PDF 查看器中会渲染模糊。等高线图需要产生临时文件。
                        </div>
                        </li>
                        <li><b>直方图</b> 坐标图使用参数<span>ybar interval</span>绘制直方图，添加<span>xticklabel interval boundaries</span>增加横轴数据标签🌐。
                        <div class="toutu">推荐添加参数<span>x tick label style = {rotate = 90,anchor = east,}</span>调整坐标方向避免重叠。</div></li>
                        <li><b>箱式图</b> 对于文件项目添加参数<span>boxplot</span>产生箱式图🌐。
                        <div class="toutu">需要引入统计库
                            <pre>\usepgfplotslibrary{statistics}</pre>
                            注意文件要有两列，以第二列做统计计算。</div></li>
                    </ul>
                    <!-- 信息加载栏 -->
                    <div class="tab_info">
                        <div>
                            <embed id="tab_code" src="../../doc/CH06/pic/txt/line.txt" type="text/plain" width="50%" height="300px"/>
                        </div>
                        <div>
                            <embed id="tab_graph" src="../../doc/CH06/pic/svg/line.svg" type="text/svg+xml" width="50%"/>
                        </div>
                    </div>
                </div>
                <script src="../../js/tab.js"></script>
                    <br>
                    <h3>6.3 从外部软件生成代码</h3>
                    
                    <p>6.3.1 制作简单一些的统计图可以在电脑端打开本页，使用上面的 <a href="https://github.com/LogCreative/PGFPlotsEdt">PGFPlots 代码生成器</a> 生成，右键编译好的图像可以保存 PDF 文件至本地。在编辑过程中善用参数命令的自动填充功能（按 Enter 键触发）。</p>

                    <div class="badge-container">
                        <a href="https://github.com/LogCreative/PGFPlotsEdt/" target="_blank">
                            <div class="gh-badge">
                                PGFPlotsEdt
                            </div>
                        </a>
                    </div>

                    <p>6.3.2 Matlab 可以使用 <a href="https://github.com/matlab2tikz/matlab2tikz" target="_blank">Matlab2TikZ</a> 生成 PGFPlots 的代码。</p>

                    <div class="badge-container">
                        <a href="https://github.com/matlab2tikz/matlab2tikz" target="_blank">
                            <div class="gh-badge">
                                Matlab2Tikz
                            </div>
                        </a>
                    </div>

                    <p>6.3.3 Python 可以安装 <a href="https://github.com/nschloe/tikzplotlib" target="_blank">tikzplotlib</a>，转换 matplotlib 图像为 PGFPlots 代码。</p>

                    <div class="badge-container">
                        <a href="https://github.com/nschloe/tikzplotlib" target="_blank">
                            <div class="gh-badge">
                                tikzplotlib
                            </div>
                        </a>
                    </div>

                    <h3>6.4 使用样式库个性化统计图</h3>

                    <p>PGFPlots 宏包拥有很多样式库，在导言区引用后可以扩展原有 PGFPlots 的功能。</p>

                    <script src="../../doc/CH06/PGFPlotsEdt/lang/dict_cn.js"></script>

                    <p>6.4.1 <span>\usetikzlibrary{plotmarks}</span> 标记样式集。</p>

                    <div class="stycon">
                        <div class="header">mark=</div>
                        <div id="plotmarks"/>
                    </div>

                    <script>
                        var p = $('#plotmarks');
                        var appendMarks = function(dict){
                            for (const mark in dict){
                                var d = $('<div/>',{
                                    class: 'markblock'
                                });
                                var t = $('<div/>',{
                                    text: mark,
                                    class: 'markheader'
                                });
                                t.appendTo(d);
                                var m = $('<img>',{
                                    src: '../../doc/CH06/PGFPlotsEdt/res/' + dict[mark][2]
                                });
                                m.appendTo(d);
                                d.appendTo(p);
                            }
                        };
                        appendMarks(sparamDic['mark'][1]);
                        appendMarks(plotmarksDic);
                    </script>
                </div>

                <p>6.4.2 <span>\usepgfplotslibrary{colorbrewer}</span> 配色方案集，Cynthia Brewer 的 Color Brewer 配色集（2002）符合 <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License 2.0</a>，以下摘录自<a href="http://www.personal.psu.edu/cab38/ColorBrewer/ColorBrewer_RGB.html" target="_blank">配色数据</a>：</p>
                <div class="stycon">
                    <input type="radio" name="colorbrewer" id="rcolor" checked>
                    <label class="radiotip" for="rcolor" id="rcolortip">color=</label>
                    <input type="radio" name="colorbrewer" id="rcomap">
                    <label class="radiotip" for="rcomap" id="rcomaptip">colormap/</label>
                    <input type="radio" name="colorbrewer" id="rcycle">
                    <label class="radiotip" for="rcycle" id="rcycletip">cycle list/</label>
                    <div id="colorbrewer"></div>
                </div>

                <script>
                    for (const colors in colorbrewerDic){
                        var c = $('<div/>',{
                            class: 'colorblock'
                        });
                        
                        var d = $('<div/>');
                        var typedict = colorbrewerArrayDic[colorbrewerDic[colors][3]];
                        var colorlist = colorbrewerDic[colors][2].split(',');
                        var len = colorbrewerDic[colors][3]=='qual' ? colorlist.length : typedict[2].length;
                        var lines = typedict.length;

                        var al = $('<div/>',{
                            class: 'colorline'
                        });
                        var n = $('<div/>',{
                            text: colors,
                            width: '5em',
                        });
                        n.css('font-weight','bold');
                        n.css('text-align','left');
                        n.appendTo(al);

                        for(var order = 0; order < len; ++order){
                            var alc = $('<div/>',{
                                text: String.fromCharCode(65+order),
                                class: 'colorsblock'
                            });
                            alc.css('height','22px');
                            alc.appendTo(al);
                        }
                        $(d).append(al);

                        for(var i = 3; i < lines; ++i){
                            var l = $('<div/>',{
                                class: 'colorline'
                            });
                            var lcn = $('<div/>',{
                                class: 'colorsblock',
                                text: i,
                                width: '5em'
                            });
                            lcn.appendTo(l);

                            for(var order = 0; order < len; ++order){
                                var lc = $('<div/>',{
                                    class: 'colorsblock',
                                });
                                if($.inArray(order,typedict[i])!=-1)
                                    lc.css('background-color', colorlist[order]);
                                lc.appendTo(l);
                            }

                            $(d).append(l);
                        }
                        
                        var cyclel = $('<div/>',{
                            class: 'colorline'
                        });
                        cyclel.addClass('colorlinecycle');
                        var cyclen = $('<div/>',{
                            class: 'colorsblock',
                            text: 'CM',
                            width: '5em'
                        });
                        cyclen.addClass('cmn');
                        cyclen.appendTo(cyclel);
                        var cyclename = $('<div/>',{
                            class: 'cyclename',
                            text: colors,
                            width: '5em',
                        });
                        cyclename.appendTo(cyclel);

                        for(var order = 0; order < len; ++order){
                            var lc = $('<div/>',{
                                class: 'colorsblock',
                                text: String.fromCharCode(65+order)
                            });
                            lc.addClass('cmblock');
                            lc.css('background-color', colorlist[order]);
                            lc.appendTo(cyclel);
                        }
                        $(d).append(cyclel);

                        var cml = $('<div/>',{
                            class: 'colormapline'
                        });
                        var cmname = $('<div/>',{
                            class: 'colormapname',
                            text: colors.substring(0,colors.length-1),
                            width: '5em'
                        });
                        cmname.appendTo(cml);
                        var cmd = $('<div/>',{
                            class: 'colormapdisplay'
                        });
                        cmd.css('background-image', 'linear-gradient(to right,' + colorbrewerDic[colors][2] + ')');
                        cmd.appendTo(cml);
                        $(d).append(cml);

                        d.appendTo(c);
                        c.appendTo('#colorbrewer');
                    }
                </script>
            </div>
        </div>
        <footer>
            <div>
                <div class="item_s">\(\rm \LaTeX\) <b>Sparkle Project</b></div>
                <div class="item_s">LogCreative 2020-2021 0201-0210</div>
                <a href="https://github.com/LogCreative/LaTeXSparkle" class="item" target="_blank">
                    <svg class="octicon octicon-mark-github v-align-middle" height="16" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
                    GitHub</a>
                <a href="https://space.bilibili.com/31271993" class="item" target="_blank"> <img src="../../img/bilibili.ico" height="16px"> Bilibili</a>
                <br>
                <a href="https://www.mathjax.org/#gettingstarted" class="item" style="font-size: smaller;" target="_blank">POWERED BY MathJax</a>
                <embed src="../../by-sa.svg" style="padding:5px 0px;" type="image/svg+xml"/>
            </div>
            
        </footer>
        
    </body>
</html>