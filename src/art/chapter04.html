<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../../css/normalize.min.css">
        <link rel="stylesheet" type="text/css" href="../../css/master.css"/>
        <link media="(max-width: 1000px)" rel="stylesheet" type="text/css" href="../../css/mobile.css"/>
        <script src="../../js/jquery-3.5.1.min.js"></script>
        <script src="../../js/jquery.ba-resize.min.js"></script>
    </head>
    <title>
        像模像样 LaTeX
    </title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../js/ReadProgressBar.js"></script>
    <body>
        <div class="rightcol">
            <div id="loadbar">
                <strong id="bar"></strong>
            </div>
            <div id="side-menu"></div>
        </div>
        <div class="side-bar">
            <label id="menu-toggle" for="menu-checkbox">
                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="30" height="30">
                    <g fill="none">
                      <path stroke="whitesmoke" stroke-linecap="round" stroke-width="3" d="M5 10 l20 0" />
                      <path stroke="whitesmoke" stroke-linecap="round" stroke-width="3" d="M5 18 l20 0" />
                      <path stroke="whitesmoke" stroke-linecap="round" stroke-width="3" d="M5 26 l20 0" />
                    </g>
                  </svg>
            </label>
            <input id="menu-checkbox" type="checkbox"/>
            <div class="header">
                <a href="../../index.html" class="logo"><svg style="fill: white; font-family: Times,'宋体'" width="144" height="35">
                    <text x="0" y="28" style="font-size: x-large">像</text>
                    <text x="21" y="23" style="font-size:large">模</text>
                    <text x="36" y="33" style="font-size: x-large">像</text>
                    <text x="56" y="28" style="font-size:x-large">样</text>
                    <text x="85" y="28" style="font-size:x-large">L</text>
                    <text x="92" y="23" style="font-size:large">A</text>
                    <text x="102" y="28" style="font-size:x-large">T</text>
                    <text x="114" y="33" style="font-size:x-large">E</text>
                    <text x="126" y="28" style="font-size:x-large">X</text>
                    </svg></a>
            </div>
            <div class="nav">
                <a href="../../index.html" class="item">首页</a>
                <a href="../roadmap.html" class="item">路线图</a>
                <a href="../article-list.html" class="item">讲稿</a>
                <a href="../about.html" class="item">关于</a>
            </div>
            <div class="footer">
                <div class="item_s">\(\rm \LaTeX\) <b>Sparkle Project</b></div>
            <div class="item_s">LogCreative 2020-2021 0201-0210</div>
            <a href="https://github.com/LogCreative/LaTeXSparkle" class="item" target="_blank">
                <svg class="octicon octicon-mark-github v-align-middle" height="16" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
                GitHub</a>
            <a href="https://space.bilibili.com/31271993" class="item" target="_blank"> <img src="../../img/bilibili.ico" height="16px"> Bilibili</a>
            <br>
            <a href="https://www.mathjax.org/#gettingstarted" class="item" style="font-size: smaller;" target="_blank">POWERED BY MathJax</a>
            <embed src="../../by-sa.svg" style="padding:5px 0px;" type="image/svg+xml"/>
            </div>
        </div>
        <progress value="0"></progress>
        <div id="bottom-link"></div>
        <div class="main">
        <div class="article" id="content">
                <h1 class="title">第四节 使用 TikZEdt 绘制 Ti<i>k</i>Z 矢量图形</h1>
                <div class="status" id="CH04">状态：文稿准备中</div>
                <div class="content" style="color: black;">
                    
                    

                    <p>正式出版物中，所有的图形都应当原则上矢量或者高清，甚至其设计语言也应当是统一的（字体、字号、图形样式）。\(\rm \LaTeX\) 也拥有一套自己的图形设计系统，使用嵌入的原生代码，就可以生成一些简洁精巧的图形。</p>

                    <h3>4.1 第一次使用 TikZEdt</h3>
                    <p>都 0202 年了，不能再完全依赖纯代码形式脑补写出个图形了。本节将会使用 TikZEdt 绘制能够嵌入 \(\rm \LaTeX\) 的 Ti<i>k</i>Z 矢量图形。</p>

                    <p>4.1.1 前往<a href="tikzedt.org" target="_blank">官网</a>下载 TikZEdt。单击<span>Download</span>边栏会跳转到 Google Code 的相关下载页面，新版本（0.2.3）只有 Windows 版本的，使用 zip 或 msi 格式安装都可以。稍微老一点的版本（0.2.2）拥有 OSX 版本。</p>

                    <p>解压后，找到这款软件对应的程序文件<span>TikZEdt.exe</span>，可以考虑右键固定到开始屏幕，或者是创建快捷方式，这样你就能很快捷的打开它了。</p>

                    <p>4.1.2 打开这款软件，第一次打开会出现一个快速入门指南的对话框，点击<span>Try to install packages (MikTeX)</span>（或者是<span>Try to install packages (TeXLive)</span>）。然后会弹出一个对话框，询问是否编译缩略图，当然选择是了！</p>

                    <p>4.1.3 如果错过了也没关系，前者可以在<span>? → Show Tips & Tricks</span>找到，后者可以在<span>Compilation → Compile snippet thumbnails...</span>找到。编译结束后如果显示仍然为空，重启软件即可。</p>

                    <h3>4.2 实例：使用 TikZEdt 制作流程框图</h3>

                    <p>我们将通过一个实例来熟悉这款软件的功能。</p>

                    <details>
                        <summary><a href="https://github.com/LogCreative/LaTeXSparkle/blob/master/doc/CH04/sync.tex" target="_blank">sync.tex</a> <a href="https://github.com/LogCreative/LaTeXSparkle/blob/master/doc/CH04/sync.pdf" target="_blank">[预览]</a></summary>
                        <pre>\begin{tikzpicture}

      \makeatletter
      \pgfdeclareshape{document}{
      \inheritsavedanchors[from=rectangle] % this is nearly a rectangle
      \inheritanchorborder[from=rectangle]
      \inheritanchor[from=rectangle]{center}
      \inheritanchor[from=rectangle]{north}
      \inheritanchor[from=rectangle]{south}
      \inheritanchor[from=rectangle]{west}
      \inheritanchor[from=rectangle]{east}
      % ... and possibly more
      \backgroundpath{% this is new
      % store lower right in xa/ya and upper right in xb/yb
      \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
      \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
      % compute corner of ``flipped page''
      \pgf@xc=\pgf@xb \advance\pgf@xc by-5pt % this should be a parameter
      \pgf@yc=\pgf@yb \advance\pgf@yc by-5pt
      % construct main path
      \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
      \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb}}
      \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yb}}
      \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yc}}
      \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@ya}}
      \pgfpathclose
      % add little corner
      \pgfpathmoveto{\pgfpoint{\pgf@xc}{\pgf@yb}}
      \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
      \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yc}}
      \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
      }
      }
      \tikzstyle{message} = [shape=document, thick, draw=black, minimum width=2cm]
    
\tikzstyle{greencirc} = [circle,fill=green!90!black,inner sep=10];
\tikzstyle{boldarrow} = [<->,line width=1pt];

\node[draw] (v4) at (0,0.5) {Member};
\node[draw] (v1) at (0,-1) {Member};
\node[draw] (v3) at (0,-2.5) {Member};
\node[minimum size=1.8cm,fill=blue!60,text=white] (v6) at (-3.5,0.5) {Dropbox};
\node[greencirc] (v2) at (4,-1) {\textbf{Overleaf}};
\node [message] (v5) at (8.5,-1) {\LaTeX~Project};
\node[text width=2cm,text badly ragged,text centered,draw,minimum size=1cm] (v7) at (-7.5,0.5) {Local Computer};
\node[text width=2cm,text badly ragged,text centered,draw,minimum size=1cm] (v8) at (-7.5,-2) {Second Computer};

\node at (-7.5,-4) {LAN};
\node at (-3.5,-4) {Overseas Server};
\node at (0,-4) {Web Editor};
\node at (4,-4) {Domestic Server};
\node at (8.5,-4) {Cloud};

\draw[boldarrow]  (v1) edge (v2);
\draw [boldarrow] (v3) edge (v2);
\draw [boldarrow] (v4) edge node[above,sloped]{Request$^2$} node[below,sloped]{Receive}(v2);
\draw [boldarrow] (v2) edge node[above] {Sync$^1$}(v5);
\draw [boldarrow]  (v4) edge node[above]{Privilege$^3$}(v6);
\draw [boldarrow] (v6) edge node[above]{Client$^4$}(v7);
\draw [boldarrow] (v7) edge node[left]{LAN$^5$}(v8);

\draw [boldarrow, densely dashed] (v7) -- (-7.5,2.5) -- (8.5,2.5) -- (v5);
\node at (9.5,0) {Upload$^6$};
\node at (-8.5,1.5) {Download};
\end{tikzpicture}</pre>
                    </details>
                    <p>4.2.1 这幅流程图恰恰阐述了<a href="chapter03.html" target="_blank">上一节</a>的 Overleaf 连接框架：在 Overleaf 平台上同步 \(\rm \LaTeX\) 项目，并通过 Overleaf 平台让用户（Member）提交与接收，有特权（Privilege）的用户可以将项目同步到 Dropbox 上，而 Dropbox 通过客户端（Client）与本地电脑连接。本地电脑可以通过手动上传的方式创建 \(\rm \LaTeX\) 项目，也可以手动下载 \(\rm \LaTeX\) 项目，在局域网（LAN）内可以将项目与第二台电脑同步。</p>
                    
                    <p>这幅流程图大部分由矩形与圆形组成，实线与虚线箭头并存，下方还有一个小型图例，都是一些基本图形。</p>

                    <p>4.2.2 <b>node。</b>单击工具栏的<span>Node tool</span>节点工具，在右侧的预览区点击一个点将会自动生成 node 。在 node 花括号所在的辖域内输入这个节点需要输入的文字。在<span>\node</span>命令后使用中括号添加参数，这里我们输入<span>[draw]</span>表示这个节点需要一个轮廓。将这行代码复制三次，每次复制完成后使用工具栏中的<span>Select and move tool</span>移动该节点的位置，让三个节点等距并排放置。</p>
                    <div class="con">
                        <div class="left">
<pre>
\node[draw] at (-0.5,0.5) {Member};
\node[draw] at (-0.5,-1) {Member};
\node[draw] at (-0.5,-2.5) {Member};</pre>
                        </div>
                        <div class="right" >
<svg width="53px" height="90px" version="1.1"
xmlns="http://www.w3.org/2000/svg">
<rect width="52px" height="20px"
style="fill:transparent;stroke-width:1;
stroke:rgb(0,0,0)"/>
<text x="0" y="15px" style="font-size: small;">Member</text>
<rect y="35px" width="52px" height="20px"
style="fill:transparent;stroke-width:1;
stroke:rgb(0,0,0)"/>
<text x="0" y="50px" style="font-size: small;">Member</text>
<rect y="70px" width="52px" height="20px"
style="fill:transparent;stroke-width:1;
stroke:rgb(0,0,0)"/>
<text x="0" y="85px" style="font-size: small;">Member</text>
</svg>
                        </div>
                    </div>
                    

                    <div class="toutu"><span>\node</span>命令代表节点，[]中括号为该节点的样式参数，<span>draw</span>将会设置这个节点的描边，如果向其赋值，比如下面的<pre>
fill=blue!60</pre>就可以指定描边颜色，默认为黑色。<span>at (<i>x</i>,<i>y</i>)</span>表示该节点的位置，{}大括号内为该命令的辖域，指示内容。</div>
                    

                    <p>绘制特殊的 Dropbox 蓝底方格。使用节点工具创建节点，辖域内填写<span>Dropbox</span>。
                        
                        
</p>
<div class="con">
    <div class="left"><pre>
\node[minimum size=1.8cm,fill=blue!60,text=white] at (-3.5,0.5) {Dropbox};</pre></div>
    <div class="right" >
        <svg width="55px" height="55px" version="1.1"
        xmlns="http://www.w3.org/2000/svg">
        <rect width="54px" height="54px"
        style="fill:rgba(102, 102, 255);stroke-width:1"/>
        <text x="0" y="30px" style="font-size: small;fill:white;">Dropbox</text>
        </svg>
    </div>
</div>

                    <div class="toutu"><span>minimum size</span>将会指定该节点的长或宽的最小值，这个值超过字长的时候就可以创建一个正方形边框。<span>fill</span>将会指定该节点的背景填充，<span>text</span>将会指定字体颜色。
                    
                    <p>颜色可以使用标准颜色以及其衍生颜色来指定，其中<span>!</span>后接该颜色向目标颜色的混合权重。目标颜色应当再接一个<span>!</span>指定，这里也就是<pre>
blue!60!white</pre></p>white 在此处被省略了。下面的<pre>green!90!black</pre>就意味着向黑色靠近。</div>

                    <p>绘制圆形的 Overleaf。</p>
<div class="con">
    <div class="left">
<pre>
\node[circle,fill=green!90!black,inner sep=10] at(4,-1) {\textbf{Overleaf}};</pre>
    </div>
    <div class="right" >
        <svg width="81px" height="81px" version="1.1"
        xmlns="http://www.w3.org/2000/svg">
        <ellipse cx="40px" cy="40px" rx="40px" ry="40px"
        style="fill:rgba(1, 229, 1);stroke-width:1"/>
        <text x="10px" y="45px" style="font-size: small;font-weight:bold">Overleaf</text>
        </svg>
    </div>
</div>

<div class="toutu"><span>circle</span>参数将指定其节点为圆形，<span>inner sep</span>将会定义圆形内边距，（<span>outer sep</span>将会定义圆形外边距）。可以分别按照 HTML 中的 padding 和 margin 去理解。</div>

                    <p>定义节点样式。复制<span>[]</span>中的内容，并在开始的部分定义<span>greencirc</span>样式。</p><pre>
\tikzstyle{greencirc} = [circle,fill=green!90!black,inner sep=10];</pre></p>
<div class="toutu"><span>\tikzstyle</span>命令将用于生成 tikz 样式，<span>=</span>为赋值符号，为此样式在<span>[]</span>内赋值。</div>
                    <p></p>这样，我们在<span>Node style</span>下拉选单中就可以看到这个样式，点选后，再次使用节点工具创建新的节点时，就会自动套用这个样式。我们现在就可以替换原来的节点参数为这个样式。样式是一种模板，目的是为了生成可复用代码。如果需要清除样式，直接清空<span>Node style</span>文本框即可。
                    <pre>
\node[greencirc] at (4,-1) {\textbf{Overleaf}};</pre>

                    <p>文件样式的 \(\rm \LaTeX\) Project。在左边的样式库中，寻找<span>Style Nodes</span>的子库，双击，将<span>message</span>样式嵌入到当前文档中。之后就可以在<span>Node style</span>中找到该样式，使用这个样式创建节点即可。</p>
                    <div class="con">
<div class="left"><pre>
\node[message] at (7.5,-1) {\LaTeX~Project};</pre></div>
<div class="right" >
    <svg width="100px" height="51px" version="1.1"
    xmlns="http://www.w3.org/2000/svg">
    <path d="M0 10 L80 10 L90 20 L90 40 L0 40 Z"
        style="fill:white;stroke-width:1;stroke: black;"/>
    <path d="M80 20 L80 10 L90 20 Z" style="fill: white;stroke:black;stroke-width:1px;"/>
    <text x="2px" y="30px" style="font-size: small;">LaTeX Project</text>
    </svg>
</div>
                    </div>
                    <details>
                        <summary>message 样式代码</summary>
                        <pre>\makeatletter
\pgfdeclareshape{document}{
    \inheritsavedanchors[from=rectangle] % this is nearly a rectangle
    \inheritanchorborder[from=rectangle]
    \inheritanchor[from=rectangle]{center}
    \inheritanchor[from=rectangle]{north}
    \inheritanchor[from=rectangle]{south}
    \inheritanchor[from=rectangle]{west}
    \inheritanchor[from=rectangle]{east}
    %...and possibly more
    \backgroundpath{% this is new
        %store lower right in xa/ya and uppper right in xb/yb
        \southwest \pgf@xa=\pgf@x \pgf@ya=\pgf@y
        \northeast \pgf@xb=\pgf@x \pgf@yb=\pgf@y
        % computer corner of ''flipped page''
        \pgf@xc=\pgf@xb \advance \pgf@xc by-5pt
        % this should be a parameter
        \pgf@yc=\pgf@yb \advance \pgf@yc by-5pt
        % construct main path
        \pgfpathmoveto{\pgfpoint{\pgf@xa}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xa}{\pgf@yb}}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yb}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yc}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@ya}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@ya}}
        \pgfpathclose
        % add little corner
        \pgfpathmoveto{\pgfpoint{\pgf@xc}{\pgf@yb}}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
        \pgfpathlineto{\pgfpoint{\pgf@xb}{\pgf@yc}}
        \pgfpathlineto{\pgfpoint{\pgf@xc}{\pgf@yc}}
    }
}
\tikzstyle{message} = [shape=document, thick, draw=black, minimum width=2cm]</pre>
                        <div class="toutu">
<span>message</span>的样式首先继承了<span>rectangle</span>的一些属性，用于定义内容的位置。接着定义了一些变量，根据内容长度的不同，边角的<span>\pgf@xc</span>和<span>\pgf@yc</span>通过计算得到。接着画路径的时候，和数铣类似地，首先将“钻头”使用<span>\pgfpathmoveto</span>移动到第一个位置，使用<span>\pgfpathlineto</span>将“钻头”线性地移动到下一个位置，最终使用<span>\pgfpathclose</span>闭合路径。右上角的小三角形也是类似的道理。
<div style="text-align: center;"><svg width="110px" height="51px" version="1.1"
    xmlns="http://www.w3.org/2000/svg">
    <path d="M13 10 L63 10 L73 20 L73 40 L13 40 Z"
        style="fill:white;stroke-width:1;stroke: black;"/>
    <path d="M63 20 L63 10 L73 20 Z" style="fill: white;stroke:black;stroke-width:1px;"/>
    <text x="18px" y="30px" style="font-size: small;font-style: italic;">Content</text>
    <text x="15px" y="50px" style="font-size: x-small;">xa</text>
    <text x="65px" y="50px" style="font-size: x-small;">xb</text>
    <text x="55px" y="7px" style="font-size: x-small;">xc</text>
    <text x="0px" y="40px" style="font-size: x-small;">ya</text>
    <text x="0px" y="15px" style="font-size: x-small;">yb</text>
    <text x="75px" y="23px" style="font-size: x-small;">yc</text>
    </svg></div>
                        </div>
                    </details>
                    
                    <p>还有两个多行文字框。</p>
                    <div class="con">
<div class="left"><pre>\node[text width=2cm,text badly ragged, text centered, draw, minimum size=1cm] at (-7.5,0.5) {Local Computer};
\node[text width=2cm,text badly ragged, text centered, draw, minimum size=1cm] at (-7.5,-2) {Second Computer};
</pre></div>
<div class="right">
    <svg width="65px" height="100px" version="1.1"
    xmlns="http://www.w3.org/2000/svg">
    <rect width="63px" height="35px"
    style="fill:transparent;stroke-width:1;
    stroke:rgb(0,0,0)"/>
    <text x="0" y="15px" style="font-size: small;"><tspan x="15" y="15">Local</tspan><tspan x="1" y="30">Computer</tspan></text>
    <rect width="63px" height="35px" y="60"
    style="fill:transparent;stroke-width:1;
    stroke:rgb(0,0,0)"/>
    <text x="0" style="font-size: small;"><tspan x="10" y="75">Second</tspan><tspan x="1" y="90">Computer</tspan></text>
    </svg>
</div>
                    </div>

                    <div class="toutu">
                        <table border="1px" cellspacing="0" cellpadding="4px">
                            <caption>与文本有关的节点属性</caption>
                            <th>属性</th>
                            <th>描述</th>
                            <tr>
                                <td>text width</td>
                                <td>文本框宽度</td>
                            </tr>
                            <tr>
                                <td>text badly ragged</td>
                                <td>不使用连字符号</td>
                            </tr>
                            <tr>
                                <td>text centered</td>
                                <td>文本居中</td>
                            </tr>
                        </table>
                    </div>
                    <p>在右方预览框内可以使用框选的方式选取节点，批量地移动。其余的文本节点按照基本的语法就可以完成了。<pre>
\node at (-7.5,-4) {LAN};
\node at (-3.5,-4) {Overseas Server};
\node at (0,-4) {Web Editor};
\node at (4,-4) {Domestic Server};
\node at (8.5,-4) {Cloud};</pre></p>

                    <p>4.2.3 <b>edge</b>。节点创建结束后，使用线段来连接节点。</p>

                    <p>使用双向箭头连接 Member 和 Overleaf。使用工具栏的<span>Edge tool</span>线段工具，依次点击两个节点，就会出现线条连接，此时上面的节点由于需要引用，被自动赋予了名称<span>v1</span>,<span>v2</span>。给线段赋予一些参数，使得其成为双向箭头。</p>

                    <div class="con">
                        <div class="left">
                            <pre>\draw[<->,line width=1pt] (v1) edge (v2);</pre>
                        </div>
                        <div class="right">
                            <svg width="180" height="80">
                                <defs>
                                    <marker id="arrow-e" viewBox="-1 -1 15 15" refX="6" refY="5" markerWidth="6" markerHeight="6" orient="auto">
                                        <path d="M0 0 C0 0, 2 4,10 5 L 10 5 C10 5,6 5,0 10 L 0 10" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" />
                                    </marker>
                                    
                                    <marker id="arrow-s" viewBox="-11 -1 15 10" refX="-6" refY="5" markerWidth="6" markerHeight="6" orient="auto">
                                        <path d="M0 0 C0 0, -2 4,-10 5 L -10 5 C-10 5,-6 5,0 10 L 0 10" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" />
                                    </marker>
                                </defs>
                                <rect width="52px" height="20px" y="30" style="fill:transparent;stroke-width:1;
                                stroke:rgb(0,0,0)"/>
                                <text x="0" y="45px" style="font-size: small;">Member</text>
                                <line x1="55" y1="40" x2="97" y2="40" stroke="black" stroke-width="1.5"  marker-start="url(#arrow-s)" marker-end="url(#arrow-e)" />
                                <ellipse cx="140px" cy="40px" rx="40px" ry="40px" style="fill:rgba(1, 229, 1);stroke-width:1"/>
        <text x="110px" y="45px" style="font-size: small;font-weight:bold">Overleaf</text>
                            </svg>
                        </div>
                    </div>
                    
                    <div class="toutu"><span>\draw</span>命令代表线条连接，<span>edge</span>用于指示左右两者之间的连接是线段关系。参数<span><-></span>用于指示该连接为双向箭头，<span>line width</span>用于指示线段粗细。</div>

                    <p>就像之前提到过的一样，也可以将这些参数存储为样式。<pre>\tikzstyle{boldarrow}=[<->,line width=1pt];
\draw[boldarrow] (v1) edge (v2);</pre>之后就可以在<span>Edge style</span>中选择<span>boldarrow</span>样式完成剩余几个双向箭头的绘制了。</p>

                    <p>对箭头标注。在 Overleaf 节点和 \(\rm \LaTeX\) Project 节点之间的双向箭头上标注<span>Sync^1</span>，需要在<span>edge</span>命令后附加<span>node</span>节点。
                    <div class="con">
                        <div class="left"><pre>\draw[boldarrow] (v2) edge node[above] {Sync$^1$} (v5)</pre></div>
                        <div class="right" ><svg width="211" height="80">
                            <defs>
                                <marker id="arrow-e" viewBox="-1 -1 15 15" refX="6" refY="5" markerWidth="6" markerHeight="6" orient="auto">
                                    <path d="M0 0 C0 0, 2 4,10 5 L 10 5 C10 5,6 5,0 10 L 0 10" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" />
                                </marker>
                                
                                <marker id="arrow-s" viewBox="-11 -1 15 10" refX="-6" refY="5" markerWidth="6" markerHeight="6" orient="auto">
                                    <path d="M0 0 C0 0, -2 4,-10 5 L -10 5 C-10 5,-6 5,0 10 L 0 10" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" />
                                </marker>
                            </defs>
                            <line x1="82" y1="40" x2="118" y2="40" stroke="black" stroke-width="1.5"  marker-start="url(#arrow-s)" marker-end="url(#arrow-e)" />
                            <ellipse cx="40px" cy="40px" rx="40px" ry="40px" style="fill:rgba(1, 229, 1);stroke-width:1"/>
    <text x="10px" y="45px" style="font-size: small;font-weight:bold">Overleaf</text>
    <g transform="translate(120,15)"><path d="M0 10 L80 10 L90 20 L90 40 L0 40 Z"
        style="fill:white;stroke-width:1;stroke: black;"/>
    <path d="M80 20 L80 10 L90 20 Z" style="fill: white;stroke:black;stroke-width:1px;"/>
    <text x="2px" y="30px" style="font-size: small;">LaTeX Project</text></g>
    <text x="85px" y="35px" style="font-size: small;">Sync</text>
    <text x="113px" y="30px" style="font-size: x-small;">1</text>
    
                        </svg></div>
                    </div>
                    <div class="toutu">在<span>edge</span>命令插入<span>node</span>命令将用于对线段居中标注，<span>[above]</span>命令将会将标注放在线段之上，<span>[below]</span>将会放在线段之下。在<span>node</span>的辖域内输入<span>$ $</span>将用于插入行内公式，<span>^{上标}</span>将会插入上标，当上标仅为一个字符时，大括号可以省略；类似地，<span>_{下标}</span>用于插入下标。</div>
                    </p>

                    <p>类似地，对最上面的箭头放置倾斜的标签。</p>

                    <div class="con">
                        <div class="left"><pre>\draw[boldarrow] (v4) edge node[above,sloped] {Request$^2$} node[below,sloped] {Receive} (v2);</pre></div>
                        <div class="right"><svg width="180" height="85">
                            <defs>
                                <marker id="arrow-e" viewBox="-1 -1 15 15" refX="6" refY="5" markerWidth="6" markerHeight="6" orient="auto">
                                    <path d="M0 0 C0 0, 2 4,10 5 L 10 5 C10 5,6 5,0 10 L 0 10" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" />
                                </marker>
                                
                                <marker id="arrow-s" viewBox="-11 -1 15 10" refX="-6" refY="5" markerWidth="6" markerHeight="6" orient="auto">
                                    <path d="M0 0 C0 0, -2 4,-10 5 L -10 5 C-10 5,-6 5,0 10 L 0 10" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" />
                                </marker>
                            </defs>
                            <g transform="translate(0,5)">
                            <rect width="52px" height="20px" style="fill:transparent;stroke-width:1;
                            stroke:rgb(0,0,0)"/>
                            <text x="0" y="15px" style="font-size: small;">Member</text>
                            <line x1="55" y1="10" x2="100" y2="28" stroke="black" stroke-width="1.5"  marker-start="url(#arrow-s)" marker-end="url(#arrow-e)" />
                            <ellipse cx="140px" cy="40px" rx="40px" ry="40px" style="fill:rgba(1, 229, 1);stroke-width:1"/>
    <text x="110px" y="45px" style="font-size: small;font-weight:bold">Overleaf</text>
                            <text x="53" y="-15" transform="rotate(20)" style="font-size: smaller;">Request</text>
                            <text x="102" y="-18" transform="rotate(20)" style="font-size: x-small;">2</text>
                            <text x="56" y="5" transform="rotate(20)" style="font-size: smaller;">Receive</text>
                        </g>
                        </svg></div>
                    </div>

                    <div class="toutu">当需要放置多个节点时，直接并列添加即可。<span>sloped</span>表示跟随线段的倾斜程度倾斜，该参数也可以在<span>Edge Labels</span>样式库里找到。</div>
                    <p>连接其余的线段，并标注。</p>
                    <div class="con">
                        <div class="left"><pre>\draw [boldarrow] (v4) edge node[above] {Privilege$^3$} (v6);
\draw [boldarrow] (v6) edge node[above] {Client$^4$} (v7);
\draw [boldarrow] (v7) edge node[left] {LAN$^5$} (v8);</pre></div>
                        <div class="right"><svg width="320px" height="120px" version="1.1"
    xmlns="http://www.w3.org/2000/svg">
    <defs>
        <marker id="arrow-e" viewBox="-1 -1 15 15" refX="6" refY="5" markerWidth="6" markerHeight="6" orient="auto">
            <path d="M0 0 C0 0, 2 4,10 5 L 10 5 C10 5,6 5,0 10 L 0 10" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" />
        </marker>
        
        <marker id="arrow-s" viewBox="-11 -1 15 10" refX="-6" refY="5" markerWidth="6" markerHeight="6" orient="auto">
            <path d="M0 0 C0 0, -2 4,-10 5 L -10 5 C-10 5,-6 5,0 10 L 0 10" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" />
        </marker>
    </defs>
    <g transform="translate(0,10)"><rect width="63px" height="35px"
        style="fill:transparent;stroke-width:1;
        stroke:rgb(0,0,0)"/>
        <text x="0" y="15px" style="font-size: small;"><tspan x="15" y="15">Local</tspan><tspan x="1" y="30">Computer</tspan></text>
        <rect width="63px" height="35px" y="60"
        style="fill:transparent;stroke-width:1;
        stroke:rgb(0,0,0)"/>
        <text x="0" style="font-size: small;"><tspan x="10" y="75">Second</tspan><tspan x="1" y="90">Computer</tspan></text>
        <line x1="35" y1="37" x2="35" y2="56" stroke="black" stroke-width="1.5"  marker-start="url(#arrow-s)" marker-end="url(#arrow-e)" />
        <text x="-1" y="52px" style="font-size: smaller;">LAN</text>
        <text x="27" y="45px" style="font-size: x-small;">5</text></g>
    <g transform="translate(120,0)"><rect width="54px" height="54px"
        style="fill:rgba(102, 102, 255);stroke-width:1"/>
        <text x="0" y="30px" style="font-size: small;fill:white;">Dropbox</text>
        <line x1="-55" y1="28" x2="-2" y2="28" stroke="black" stroke-width="1.5"  marker-start="url(#arrow-s)" marker-end="url(#arrow-e)" />
        <text x="-50" y="22px" style="font-size: smaller;">Client</text>
        <text x="-15" y="15px" style="font-size: x-small;">4</text>
    </g>    
    <g transform="translate(250,15)">
        <rect width="52px" height="20px" style="fill:transparent;stroke-width:1;stroke:rgb(0,0,0)"/>
        <text x="0" y="15px" style="font-size: small;">Member</text>
        <line x1="-75" y1="12" x2="-2" y2="12" stroke="black" stroke-width="1.5"  marker-start="url(#arrow-s)" marker-end="url(#arrow-e)" />
        <text x="-70" y="5px" style="font-size: smaller;">Privilege</text>
        <text x="-15" y="0px" style="font-size: x-small;">3</text>
    </g>
    </svg></div>
                    </div>
                    
                    <div class="toutu">当箭头是纵向的时候，应当使用<span>[left]</span>或<span>[right]</span>方位。</div>
                    
                    <p>最后一步，绘制折线。使用工具栏中的<span>Path tool</span>路径工具，构造折线路径，依次点击路径上的节点。然后使用 node 工具创建标注。</p>

    <div class="con">
        <div class="left"><pre>\draw [boldarrow, densely dashed] (v7) -- (-7.5,2.5) -- (8.5,2.5) -- (v5);
\node at (9.5,0) {Upload$^6$};
\node at (-8.5,1.5) {Download};</pre></div>
        <div class="right"><svg width="290px" height="110px" version="1.1"
            xmlns="http://www.w3.org/2000/svg">
            <defs>
                <marker id="arrow-e" viewBox="-1 -1 15 15" refX="6" refY="5" markerWidth="6" markerHeight="6" orient="auto">
                    <path d="M0 0 C0 0, 2 4,10 5 L 10 5 C10 5,6 5,0 10 L 0 10" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" />
                </marker>
                
                <marker id="arrow-s" viewBox="-11 -1 15 10" refX="-6" refY="5" markerWidth="6" markerHeight="6" orient="auto">
                    <path d="M0 0 C0 0, -2 4,-10 5 L -10 5 C-10 5,-6 5,0 10 L 0 10" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" />
                </marker>
            </defs>
            <g transform="translate(35,0)"><g transform="translate(0,60)">
                <rect width="63px" height="35px"
                style="fill:transparent;stroke-width:1;
                stroke:rgb(0,0,0)"/>
                <text x="0" y="15px" style="font-size: small;"><tspan x="15" y="15">Local</tspan><tspan x="1" y="30">Computer</tspan></text>
                </g>
                <g transform="translate(150,60)">
                    <path d="M0 10 L80 10 L90 20 L90 40 L0 40 Z"
    style="fill:white;stroke-width:1;stroke: black;"/>
    <path d="M80 20 L80 10 L90 20 Z" style="fill: white;stroke:black;stroke-width:1px;"/>
    <text x="2px" y="30px" style="font-size: small;">LaTeX Project</text>
                </g>
                
                <path d="M30 58 L30 5 L195 5 L195 68" style="fill:transparent;stroke-width:1;stroke: black;" marker-start="url(#arrow-s)" stroke-dasharray="5,2" marker-end="url(#arrow-e)"></path></g>
            
            <text x="0" y="45px" style="font-size: smaller;">Download</text>

            <text x="233" y="45px" style="font-size: smaller;">Upload</text>

            <text x="278" y="40px" style="font-size: x-small;">6</text>

            </svg></div>
    </div>

                    <div class="toutu"><span>--</span>用于折线依次连接节点，<span>densely dashed</span>是线条的一种样式，密集虚线，更多的样式可以在<span>Line Styles</span>样式库中找到。</div>

                    <p>4.2.4 至此，这个流程图就画完了，可能希望插入到文档中，第一种方式就是内嵌代码，这种方式的优点是可以跟随文件编译，以期获得同样的文档环境参数设置（字体、字号）。</p>

                    <p>打开<span>File</span>文件选单，选择<span>Save As...</span>另存为，将其存入之前文档的同路径下某处，例如：<span>pic/sync.tex</span>。这时候就可以在文档中使用<pre>\input{pic/sync.tex}</pre></p>

                    <div class="toutu"><span>\input</span>命令用于插入代码。</div>
                    
                    <p>命令编译器在编译时直接将代码片段拼接于此处。不要忘了在导言区引用宏包<span>tikz</span>。<pre>\usepackage{tikz}</pre></p>

                    <p>可是，整个图形是过大的，需要进入这个文件，对整个<span>tikzpicture</span>域使用全局修饰命令<pre>\begin{tikzpicture}[scale=0.65]</pre>但是有些字体却没有被缩小，这时候需要再增加一个命令<pre>\begin{tikzpicture}[scale=0.65,every node/.style={scale=0.65}]</pre></p>

                    <div class="toutu"><span>scale</span>将会指定缩放，<span>every node/.style</span>顾名思义，将会首先对每个节点赋予样式，这里赋予了缩放。</div>

                    <p>当然还有第二种方式，直接导出为 PDF 后再插入到文档中。使用<span>File</span>选单下的<span>Save Pdf As...</span>另存 PDF 命令将其存入类似的路径下，输入<pre>\includegraphics[scale=0.65]{pic/sync.pdf}</pre></p>

                    <div class="toutu"><span>\includegraphics</span>用于插入各种类型的图片（不仅仅是 PDF），这里使用了缩放参数<span>scale</span>。</div>

                    <p>就可以达到类似的效果。</p>
                </div>
            </div>
        </div>
        <footer>
            <div>
                <div class="item_s">\(\rm \LaTeX\) <b>Sparkle Project</b></div>
                <div class="item_s">LogCreative 2020-2021 0201-0210</div>
                <a href="https://github.com/LogCreative/LaTeXSparkle" class="item" target="_blank">
                    <svg class="octicon octicon-mark-github v-align-middle" height="16" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
                    GitHub</a>
                <a href="https://space.bilibili.com/31271993" class="item" target="_blank"> <img src="../../img/bilibili.ico" height="16px"> Bilibili</a>
                <br>
                <a href="https://www.mathjax.org/#gettingstarted" class="item" style="font-size: smaller;" target="_blank">POWERED BY MathJax</a>
                <embed src="../../by-sa.svg" style="padding:5px 0px;" type="image/svg+xml"/>
            </div>
            
        </footer>
        
    </body>
</html>